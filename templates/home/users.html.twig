{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
<main>
    <div class="container">
        <aside>
            <nav>
                <ul>
                    <li data-controller="modal">
                        <p>{{ user.email }}</p>
                        <button data-target="modal.openModal" data-action="click->modal#open" class="open-modal">Envoyer un message</button>
                        <div data-modal-target="modal" class="modal">
                            <turbo-frame id="message_form">
                                <form action="{{ path('app_send_message', {'id': user.id}) }}" method="POST">
                                    <input type="hidden" name="receiver_id" value="{{ user.id }}">
                                    <input type="text" name="content">
                                    <button>Envoyer</button>
                                </form>
                            </turbo-frame>
                        </div>
                        <div data-modal-target="overlay" data-action="click->modal#close" class="overlay"></div>
                    </li>
                </ul>
            </nav>
        </aside>
    </div>
</main>
<style>
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background-color: rgba(0,0,0,.5);
        z-index: 1;
        display: none;
    }

    .overlay.active {
        display: block;
    }

    .modal {
        padding: 20px;
        background-color: #fff;
        border-radius: 15px;
        z-index: 2;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: none;
    }

    .modal.active {
        display: block;
    }
</style>
{% endblock %}